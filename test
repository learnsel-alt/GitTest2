import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class CanaryApp {

    // Placeholder for Canary Name
    private static final String CANARY_NAME = "Governance";

    public static void main(String[] args) {
        // Create the main frame
        JFrame frame = new JFrame("Canary Management");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400, 300);
        frame.setLayout(new BorderLayout(10, 10));

        // Create the main panel with vertical box layout
        JPanel mainPanel = new JPanel();
        mainPanel.setLayout(new BoxLayout(mainPanel, BoxLayout.Y_AXIS));
        mainPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));

        // Canary Name Panel
        JPanel canaryPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
        JLabel canaryLabel = new JLabel("Canary Name: " + CANARY_NAME);
        canaryPanel.add(canaryLabel);
        mainPanel.add(canaryPanel);

        // Add blank space
        mainPanel.add(Box.createVerticalStrut(20));

        // Start/Stop Buttons Panel
        JPanel buttonPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
        JButton startButton = new JButton("Start");
        JButton stopButton = new JButton("Stop");
        buttonPanel.add(startButton);
        buttonPanel.add(stopButton);
        mainPanel.add(buttonPanel);

        // Add blank space
        mainPanel.add(Box.createVerticalStrut(20));

        // Update Secret Button Panel
        JPanel updatePanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
        JButton updateSecretButton = new JButton("Update Secret");
        updatePanel.add(updateSecretButton);
        mainPanel.add(updatePanel);

        // Dropdown and Text Field Panel (initially hidden)
        JPanel secretPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
        String[] secretOptions = {"Secret1", "Secret2", "Secret3"};
        JComboBox<String> secretDropdown = new JComboBox<>(secretOptions);
        JTextField secretTextField = new JTextField(10);

        secretDropdown.setVisible(false);
        secretTextField.setVisible(false);
        secretPanel.add(secretDropdown);
        secretPanel.add(secretTextField);
        mainPanel.add(secretPanel);

        // Submit/Reset Buttons Panel (initially hidden)
        JPanel submitResetPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
        JButton submitButton = new JButton("Submit");
        JButton resetButton = new JButton("Reset");

        submitButton.setVisible(false);
        resetButton.setVisible(false);
        submitResetPanel.add(submitButton);
        submitResetPanel.add(resetButton);
        mainPanel.add(submitResetPanel);

        // Add everything to the main frame
        frame.add(mainPanel, BorderLayout.CENTER);

        // Action listener for Update Secret button
        updateSecretButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                secretDropdown.setVisible(true);
                secretTextField.setVisible(true);
                submitButton.setVisible(true);
                resetButton.setVisible(true);
                frame.revalidate(); // Refreshes the layout without resizing the frame
            }
        });

        // Action listener for Start button
        startButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                startCanary();
            }
        });

        // Action listener for Stop button
        stopButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                stopCanary();
            }
        });

        // Action listener for Submit button
        submitButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                String selectedSecret = (String) secretDropdown.getSelectedItem();
                String enteredText = secretTextField.getText();
                System.out.println("Submitted Secret: " + selectedSecret + ", Entered Text: " + enteredText);
                // Implement the submit logic here
            }
        });

        // Action listener for Reset button
        resetButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                secretDropdown.setSelectedIndex(0); // Reset dropdown to first item
                secretTextField.setText(""); // Clear text field
                secretDropdown.setVisible(false); // Hide dropdown
                secretTextField.setVisible(false); // Hide text field
                submitButton.setVisible(false); // Hide submit button
                resetButton.setVisible(false); // Hide reset button
                frame.revalidate(); // Refresh the layout to hide components
                System.out.println("Form reset.");
            }
        });

        // Show the frame
        frame.setVisible(true);
    }

    // Placeholder method for starting the canary
    private static void startCanary() {
        System.out.println("Canary started.");
        // Implement the start logic here
    }

    // Placeholder method for stopping the canary
    private static void stopCanary() {
        System.out.println("Canary stopped.");
        // Implement the stop logic here
    }
}
